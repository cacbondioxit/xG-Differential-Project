# xG-Differential-Project
이 프로젝트는
1. (실제 득점 - xG) 값이 왜 축구 선수의 특성을 잘 보여주지 못하는 값인지 이유를 찾고
2. (실제 득점 - xG) 값을 코시 분포에 적합시키는 프로젝트입니다.

The project about 
1. finding reason why xG Differential(= Goals - xG) doesn't represent the quality of football(soccer) athletes well.
2. fitting Cauchy distribution into xG Differential(= Goals - xG) data of athletes.

추가: 2024년 6월에 약간의 리뉴얼이 이루어졌습니다.

![펨코 댓글](https://github.com/cacbondioxit/xG-Differential-Project/assets/77119722/d0d3cdfd-a9a1-4615-82d8-7977f3257636)

## xG에 대해 아는 사람이 그렇게 많지는 않으나, xG를 소문으로 약간 들어본 사람들이 오해하는 경향이 꽤 많이 보입니다.

아래 부분은 <세이버메트릭스 레볼루션> 114페이지부터 참고해서 축구에 맞게 바꿔서 쓴 것임을 밝히며, 제 개인 의견을 조금 추가한 것입니다.

특히, 오늘 이야기할 주제인 xG 대비 실제 득점과의 차이 값에 대해 사람들이 많이 오해합니다. xG 대비 실제 득점의 차이를 보고 선수를 '세모발'이니, '올해 폼이 안좋니', 하고 재단하는 경우가 있습니다. 그렇게 생각하는 것은 사실 이상한 일이 아닙니다. 예를 들어 한 공격수가 이번 시즌에 10골을 넣었다고 합시다. 근데 알고 보니 xG값은 12였다고 해봅시다. 이 상황을 어떻게 해석할 것인가요? "그 공격수가 별로여서" 말고는 해석할 방도가 없어보입니다.

하지만 정말 실제 득점에서 xG를 뺀 값이 마무리 능력, 선수의 폼을 잘 대변할 수 있는 지표인지는 실제로 직접 따져볼 필요가 있습니다. 이를 위해 (실제 득점 - xG)가 "예측 가능한 값"인지, 혹은 "운에 의해 무작위적으로 결정되는 값"인지에 대해 생각해볼 수 있습니다. 축구 선수들의 성적을 예측하기 위해서는 먼저 축구의 요소 중 예측 가능한 것과 그렇지 않은 것을 분리해 내야 합니다. 좀 더 자세히 말하자면, 예측 가능한 것은 '기술', 예측 불가능한 것은 '운', '무작위성'이라고 할 수 있습니다. 모든 게임은 그 속성에 따라 다양한 운적인 요소를 포함하고 있습니다. 체스에서는 운의 영역이 끼어들 틈이 없는 완벽한 기술 중심의 경기가 펼쳐지지만, 로또는 그 양상이 다릅니다. 로또에 기술이 필요할까? 45개의 숫자 중에 6개를 찍는, 하지만 아무런 기술이 필요 없는 게임이 로또입니다.

축구는 체스와 로또 사이, 그 어딘가에 위치합니다. 흔히 말하는 '5대 리그'에서 뛰기 위해서는 그만큼 엄청난 기술이 필요한 것이 사실이며, 그 중에서도 더 뛰어난 선수가 롱런을 합니다. 하지만 축구에서는 운이라는 요소가 크게 작용하는 경우가 있습니다. 한 경기 중에, 그리고 특히 챔피언스리그에서 아무도 예측하지 못한 작은 요소에 의해 경기가 뒤집히는 경우들을 떠올려봅시다. 

득점 수, 공격 포인트(득점 + 어시스트 수) 같은 지표도 운에서 자유로울 수 없습니다. 둘 모두 그 자체로 팬들에게는 공격수의 능력을 평가하는 지표로서 자리잡고 있기는 하나, 슈팅의 결과는 공격수의 의지와는 무관하기 때문입니다. (골대에 맞은 슈팅 등은 공격수가 기술적으로 의도한 것이 아닙니다.) '신뢰도'라는 용어는 여기서 중요한 역할을 합니다. 통계학자들이 신호(기술)와 소음(운)을 구분하는 데 가장 큰 도움을 주는 것이 이 신뢰도이기 때문입니다.

즉 어떤 지표(공격 포인트 같은)가 계속해서 비슷한 경향성을 보인다면(선수의 기술을 크게 반영한다면), 아마 결과적인 수치 또한 계속해서 비슷하게 나올 것입니다. 반대로, 운에 의해 크게 변하는 지표가 있다면 분명히 그 지표가 보여주는 수치는 일관성이 없을 것입니다. 예를 들어 성인의 키는 그 사람의 특성을 잘 나타내는 값으로 볼 수 있습니다. 성인의 키는 시간이 지난다고 해서 변하는 것이 아니기 때문입니다. 반대로 어떤 이의 지갑에 있는 만원짜리 지폐의 수는 그 사람을 평가하는 믿을 만한 척도가 될 수 없습니다. 지갑 속의 상황은 그 사람의 직업에 의해서도 변하지만, 마지막 현금 거래에서 받은 잔돈으로 인해 크게 변할 수 있는 것이기 때문입니다.

사람들의 특성이라는 것이 오랜 시간이 흐름에 따라 변하기도 하지만(키는 천천히 변하거나 거의 변하지 않는 반면, 체중의 변화는 굉장히 잦은 편입니다), 우리는 대체로 늘 비슷하게 유지되는 어떤 것을 그 사람의 특성이라 여깁니다. 그런 까닭에 어떤 통계를 선수에게 적용했을 때 꾸준한 수치를 보여준다면, 그 통계에 의해 측정된 값을 그 선수의 특성이라 할 수 있는 근거가 됩니다. 반면 짧은 기간에도 계속해서 불규칙적인 수치가 나온다면, 이것은 선수의 특징이라 볼 수 없으며 '예측성'이 낮은 특성으로 간주됩니다.

신뢰도를 양적으로 분석하는 방법 중 하나는 바로 통계적인 '자기상관'(autocorrelation)을 조사하는 것입니다. 쉽게 말해, 이전의 수치와 현재의 수치가 어느 정도 연관성을 가지는지 조사한다는 이야기입니다. 그림 5에는 1985년부터 2011년까지 250타석 이상 들어선 타자들의 연속 시즌 타율이 기록되어 있습니다. 가로축이 특정 시즌(t)의 타율을 나타내고, 세로축은 그 바로 다음 해(t+1)의 타율을 나타냅니다. 만약 타율이 전적으로 선수의 기술적 측면에만 근거한 기록이라고 한다면, 우리는 그림5에서 가로축의 수치와 세로축의 수치가 같은 점들의 집합을 볼 수 있어야 합니다. 전체적인 그림으로는 가로축과 세로축의 수치가 같은 점들의 집합이자 상관관계가 1에 가까운 그림이 그림5에 펼쳐져야 한다는 이야기입니다.

하지만 예상과 달리 상관관계가 0.414로 나왔고, 이는 상당히 낮은 연관성이라 볼 수 있습니다. 즉 이번 시즌의 타율이 내년의 타율을 예측하는 척도가 되기는 힘들다는 결론을 도출할 수 있습니다. 좀 더 정확히 말하자면 올 시즌의 타율로 설명할 수 있는 내년 시즌 타율은 전체의 단 17.1%(결정계수, = 0,414 × 0.414)에 불과합니다. 즉 타율은 상대적으로 낮은 자기상관을 보여주었으며, 이 말은 타율에는 운이라는 요소가 크게 작용한다는 뜻입니다. 다시 말해 타율이 선수의 특성을 잘 보여주는 지표는 아니라는 뜻입니다.

이것과 같은 방법으로 (실제 득점 - xG)가 공격수의 특성을 잘 대변하는 값인지 파악하였습니다. 

![KakaoTalk_20221231_023054350](https://github.com/cacbondioxit/xG-Differential-Project/assets/77119722/1a437c16-83f3-49ea-819c-0aae52a4251f)

![KakaoTalk_20230105_185314293](https://github.com/cacbondioxit/xG-Differential-Project/assets/77119722/19e317fb-6b27-479a-b3b5-2dfa8340f230)

## 기대 득점 (xG) 이야기로 돌아와서

"세이버메트릭스 레볼루션"에 따르면 이렇게 신뢰도 있는(선수의 한 특성에 근거한) 지표들은 이렇게 자기 상관이 높다는 것을 알 수 있습니다. 그렇다면 (실제 득점 - 기대 득점)의 자기 상관(신뢰도)은 어떨까요?

제가 주장하고 싶은 바는, 큰 표본과 달리 작은 표본에서 기댓값과 실제값들의 차이는 내 의도와 달리 얼마든지 벌어질 수 있는 가능성이 있기 때문에 (실제 득점 - xG) 값은 선수의 특성을 잘 대변하는 값이 아니라는 것입니다.

극단적으로, 주사위를 3개 던지는 상황과 300개를 던지는 상황이 있다고 생각해봅시다. 여기서 1의 눈이 나온 주사위를 센다고 가정해봅시다. 주사위를 300개 던지는 상황에서는 1의 눈이 나온 주사위를 굳이 다 세어가며 개수를 헤아릴 필요가 없을 것입니다. 주사위의 눈은 주사위 던지는 사람의 실력에 의해 결정되는 것이 아니라 확률적으로 결정되므로, 300*1/6 = 50개 정도가 나올 것이라고 통계적으로 해석하면 되기 때문입니다. 그리고 주사위를 300개 던지는 행위를 반복한다고 하여도, 1의 눈이 막 100개 이상 나오는 등의 이변은 잘 일어나지 않습니다. 즉 기댓값이 실제 상황을 잘 대변합니다.

그러나 주사위가 3개인 경우, 1의 눈이 나온 주사위가 3 * 1/6 = 0.5개 정도가 나온다고 해석하는 게 실제 상황을 잘 대변할까요? 주사위를 3개 던지는 행위를 계속 반복하다 보면 1의 눈이 0개가 나오는 경우도 아주 많을 것이고, 1개가 나올 수도 있을 것이고, 2개가 나올 수도 있고, 잘 하면 3개 다 눈이 1이 나올 수도 있습니다. 이 4가지 케이스를 왔다갔다할 것입니다. 따라서 이렇게 작은 표본에서는 "0.5개"라는 기댓값이 실제로 나타나는 상황을 잘 대변하지 못하게 됩니다.

만약 공격수에게 수백 개가 넘는 슈팅 샘플이 존재하여 실제 득점이 xG를 상회한다면, 그 선수는 일반적인(평균적인) 선수보다 마무리 능력이 좋은 선수라고 결론낼 수 있을 것입니다. 하지만 축구에서는 그렇게 많은 샘플을 모으기 쉽지 않기 때문에, xG와 실제 득점 간의 괴리는 커질 수 밖에 없습니다.

자세한 이야기를 코드에서 찾아보실 수 있습니다.
